"use strict";(self.webpackChunkcemedoApp=self.webpackChunkcemedoApp||[]).push([[433],{34433:(ne,m,a)=>{a.r(m),a.d(m,{FactureModule:()=>X});var d=a(69808),g=a(91083),h=a(86087),r=a(59783),_=a(45330),e=a(5e3),f=a(99728),Z=a(12363),C=a(12235),T=a(68108),x=a(67658),v=a(44534),c=a(24851),b=a(15315),A=a(19114),y=a(17773),F=a(40845),q=a(14036),u=a(93075),M=a(75652),U=a(31424);function N(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().openNew()}),e.qZA(),e._uU(1," \xa0 "),e.TgZ(2,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteSelectedProducts()}),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedEntity||!t.selectedEntity.length)}}function w(n,l){1&n&&e._UZ(0,"button",21)}function P(n,l){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th",22),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",23),e._uU(4,"Assure "),e._UZ(5,"p-sortIcon",24),e.qZA(),e.TgZ(6,"th",25),e._uU(7,"Mode de paiement "),e._UZ(8,"p-sortIcon",26),e.qZA(),e.TgZ(9,"th",27),e._uU(10,"Date emission "),e._UZ(11,"p-sortIcon",28),e.qZA(),e.TgZ(12,"th",29),e._uU(13,"Montant "),e._UZ(14,"p-sortIcon",30),e.qZA(),e.TgZ(15,"th",31),e._uU(16,"Actions"),e.qZA(),e.qZA(),e.TgZ(17,"tr"),e.TgZ(18,"th",22),e._UZ(19,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(20,"th"),e._UZ(21,"p-columnFilter",32),e.qZA(),e.TgZ(22,"th"),e._UZ(23,"p-columnFilter",33),e.qZA(),e.TgZ(24,"th"),e._UZ(25,"p-columnFilter",34),e.qZA(),e.TgZ(26,"th"),e._UZ(27,"p-columnFilter",35),e.qZA(),e._UZ(28,"th"),e.qZA())}function S(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr",36),e.TgZ(1,"td"),e._UZ(2,"p-tableCheckbox",37),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",38),e.TgZ(13,"button",39),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().editProduct(s)}),e.qZA(),e._uU(14," \xa0 "),e.TgZ(15,"button",40),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().deleteProduct(s)}),e.qZA(),e._uU(16,"\xa0 "),e.TgZ(17,"button",41),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().deleteProduct(s)}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=l.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(t.assure.user.fullName),e.xp6(2),e.Oqu(t.modePaiement.libelle),e.xp6(2),e.Oqu(e.xi3(9,6,t.dateEmission,"dd/mm/yyyy")),e.xp6(3),e.Oqu(t.montant)}}function J(n,l){if(1&n&&(e.TgZ(0,"div",42),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" Au total il y a ",t.liste?t.liste.length:0," enregistrement(s). ")}}function R(n,l){if(1&n&&(e.TgZ(0,"div",58),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(t.specialite.assure)}}function E(n,l){if(1&n&&e.YNc(0,R,3,1,"div",57),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.specialite.assure.user)}}function Y(n,l){if(1&n&&(e.TgZ(0,"div",59),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.user.fullName)}}function O(n,l){if(1&n&&(e.TgZ(0,"div",61),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(t.specialite.modePaiement)}}function k(n,l){if(1&n&&e.YNc(0,O,3,1,"div",60),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.specialite.modePaiement)}}function I(n,l){if(1&n&&(e.TgZ(0,"div",62),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.libelle)}}function Q(n,l){if(1&n&&(e.TgZ(0,"div",64),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(t.specialite.ordonnance)}}function L(n,l){if(1&n&&e.YNc(0,Q,3,1,"div",63),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.specialite.ordonnance)}}function B(n,l){if(1&n&&(e.TgZ(0,"div",65),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.id)}}function z(n,l){1&n&&(e.TgZ(0,"small",66),e._uU(1,"Date emission est requise."),e.qZA())}function H(n,l){1&n&&(e.TgZ(0,"small",66),e._uU(1,"Montant est requis."),e.qZA())}function D(n,l){if(1&n){const t=e.EpF();e._UZ(0,"br"),e.TgZ(1,"div",43),e.TgZ(2,"label",44),e._uU(3,"Assure"),e.qZA(),e.TgZ(4,"p-dropdown",45),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().specialite.assure.user=o}),e.YNc(5,E,1,1,"ng-template",46),e.YNc(6,Y,3,1,"ng-template",47),e.qZA(),e.qZA(),e.TgZ(7,"div",43),e.TgZ(8,"label",44),e._uU(9,"Mode de paiement"),e.qZA(),e.TgZ(10,"p-dropdown",48),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().specialite.modePaiement=o}),e.YNc(11,k,1,1,"ng-template",49),e.YNc(12,I,3,1,"ng-template",47),e.qZA(),e.qZA(),e.TgZ(13,"div",43),e.TgZ(14,"label",44),e._uU(15,"Ordonnance"),e.qZA(),e.TgZ(16,"p-dropdown",50),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().specialite.ordonnance=o}),e.YNc(17,L,1,1,"ng-template",51),e.YNc(18,B,3,1,"ng-template",47),e.qZA(),e.qZA(),e.TgZ(19,"div",43),e.TgZ(20,"label",52),e._uU(21,"Date emission"),e.qZA(),e.TgZ(22,"p-calendar",53),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().specialite.dateEmission=o}),e.qZA(),e.YNc(23,z,2,0,"small",54),e.qZA(),e.TgZ(24,"div",43),e.TgZ(25,"label",55),e._uU(26,"Montant"),e.qZA(),e.TgZ(27,"input",56),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().specialite.montant=o}),e.qZA(),e.YNc(28,H,2,0,"small",54),e.qZA(),e._UZ(29,"hr")}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("options",t.liste_assure)("ngModel",t.specialite.assure.user)("filter",!0)("showClear",!0),e.xp6(6),e.Q6J("options",t.liste_paiement)("ngModel",t.specialite.modePaiement)("filter",!0)("showClear",!0),e.xp6(6),e.Q6J("options",t.liste_ordonnance)("ngModel",t.specialite.ordonnance)("filter",!0)("showClear",!0),e.xp6(6),e.Q6J("ngModel",t.specialite.dateEmission),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.specialite.dateEmission),e.xp6(4),e.Q6J("ngModel",t.specialite.montant),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.specialite.montant)}}function j(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideDialog()}),e.qZA(),e.TgZ(1,"button",68),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveProduct()}),e.qZA()}}const $=function(n,l){return[7,n,l]},V=function(){return{width:"750px","margin-top":"-90px"}},G=function(){return{width:"450px"}},W=[{path:"liste",component:(()=>{class n{constructor(t,i,o,s,p,ee,te){this.dialogService=t,this.modePaiement=i,this.patientService=o,this.service=s,this.messageService=p,this.confirmationService=ee,this.ordonnanceService=te,this.selectAll=!1,this.data_delete=Array(),this.data_create={id:null,dateEmission:"",montant:null,modePaiement:{id:null,libelle:""},ordonnance:{id:null,assure:{id:null,fullName:"",nom:""}},assure:{id:null,user:{fullName:"",nom:""}},active:null}}ngOnInit(){this.ordonnanceService.getListe().then(t=>this.liste_ordonnance=t),this.modePaiement.getListe().then(t=>this.liste_paiement=t),this.patientService.getListe().then(t=>this.liste_assure=t),console.log(this.liste),this.items=[{label:"Facture"},{label:"Liste des factures",routerLink:""}],this.home={icon:"pi pi-home"},this.loading=!0,this.service.getListe().then(t=>{this.liste=t.slice(0,6).filter(i=>0==i.active),this.totalRecords=this.liste.length,console.log(t.length)}),this.service.getListe().then(t=>{this.virtuelle=t.filter(i=>0==i.active),this.totalRecords=this.virtuelle.length,this.loading=!1,console.log(this.virtuelle)})}loadCustomers(t){this.loading=!0,setTimeout(()=>{this.virtuelle&&(this.liste=this.virtuelle.slice(t.first,t.first+t.rows),this.loading=!1)},1e3)}onSelectAllChange(t){t.checked?this.service.getListe().then(o=>{this.selectedEntity=o,this.selectAll=!0}):(this.selectedEntity=[],this.selectAll=!1)}openNew(){this.specialite=this.data_create,this.submitted=!1,this.entityDialog=!0}deleteSelectedProducts(){this.confirmationService.confirm({message:" Voulez vous r\xe9ellement supprimer ces enregistrements ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.liste=this.liste.filter(t=>!this.selectedEntity.includes(t)),this.selectedEntity.forEach(t=>{this.data_delete.push(t.id)}),this.selectedEntity=null,this.service.deleteSelectedProducts(this.data_delete).subscribe(t=>{this.loading=!0,setTimeout(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Enregistrement (s) effectu\xe9 (s) avec succes",life:3e3}),this.loading=!1},1e3)})}})}editProduct(t){this.specialite=Object.assign({},t),this.entityDialog=!0}deleteProduct(t){this.confirmationService.confirm({message:" Voulez vous r\xe9ellement supprimer cet enregistrement ? ",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.liste=this.liste.filter(i=>i.id!==t.id),this.specialite=Object.assign({},t),this.service.delete(this.specialite.id).subscribe(i=>{this.loading=!0,setTimeout(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Succes",detail:"Suppression effectu\xe9e avec success",life:3e3})},1e3)})}})}hideDialog(){this.entityDialog=!1,this.submitted=!1}saveProduct(){const t={id:this.specialite.id,dateEmission:this.specialite.dateEmission,montant:this.specialite.montant,modePaiement:this.specialite.modePaiement.id,ordonnance:this.specialite.ordonnance.id,assure:this.specialite.assure.id};this.submitted=!0,this.specialite.id?(this.liste[this.findIndexById(this.specialite.id)]=this.specialite,this.service.update(t).subscribe(i=>{this.loading=!0,setTimeout(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Mise \xe0 jour effectu\xe9e avec success",life:3e3}),this.loading=!1},1e3)})):(this.service.create(t).subscribe(i=>{this.loading=!0,setTimeout(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Ajout effectu\xe9 avec success",life:3e3})},1e3)}),this.liste.push(this.specialite)),this.liste=[...this.liste],this.entityDialog=!1,this.specialite=Object.assign({},this.specialite)}findIndexById(t){let i=-1;for(let o=0;o<this.liste.length;o++)if(this.liste[o].id===t){i=o;break}return i}createId(){return 1}onSelectionChange(t=[]){this.selectAll=t.length===this.totalRecords,this.selectedEntity=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.xA),e.Y36(f.N),e.Y36(Z.e),e.Y36(C.n),e.Y36(r.ez),e.Y36(r.YP),e.Y36(T.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-facture"]],viewQuery:function(t,i){if(1&t&&e.Gf(h.NW,5),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first)}},features:[e._Bn([r.ez,r.YP,_.xA])],decls:23,vars:23,consts:[[1,"content",2,"background-color","white"],[1,"content-block"],[1,"block-header"],[3,"model","home"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card",2,"background-color","rgb(10,112,172)"],[1,"body"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["dataKey","id","styleClass","p-datatable-gridlines","currentPageReportTemplate","Affichage de {first} \xe0 {last} sur  {totalRecords} entr\xe9es",3,"value","lazy","selection","selectAll","paginator","rows","totalRecords","showCurrentPageReport","loading","rowsPerPageOptions","onLazyLoad","selectionChange","selectAllChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Facture","styleClass","p-fluid el",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["pButton","","pRipple","","label","Nouveau","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Supprimer","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["pButton","","pRipple","","label","Imprimer","icon","pi pi-upload",1,"p-button-help","btn-view"],[2,"width","3rem"],["pResizableColumn","","pSortableColumn","assure"],["field","assure"],["pResizableColumn","","pSortableColumn","modePaiement"],["field","modePaiement"],["pResizableColumn","","pSortableColumn","dateEmission"],["field","dateEmission"],["pResizableColumn","","pSortableColumn","montant"],["field","montant"],["pResizableColumn",""],["type","text","field","assure.user.fullName"],["type","text","field","modePaiement.libelle"],["type","text","field","dateEmission"],["type","text","field","montant"],[3,"pSelectableRow"],[3,"value"],["width","200px"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button","p-button-success","btn-sm","btn-edit",3,"click"],["pButton","","pRipple","","icon","pi pi-check",1,"p-button","p-button-help","btn-sm","btn-view",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button","p-button-warning","btn-sm","btn-delete",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"field"],["for","assure"],["optionLabel","user.fullName","filterBy","id","placeholder","Selectionner une assure",3,"options","ngModel","filter","showClear","ngModelChange"],["pTemplate","specialite.assure.user"],["pTemplate","id"],["optionLabel","libelle","filterBy","libelle","placeholder","Selectionner un mode de paiement",3,"options","ngModel","filter","showClear","ngModelChange"],["pTemplate","specialite.modePaiement"],["optionLabel","id","filterBy","id","placeholder","Selectionner une assure",3,"options","ngModel","filter","showClear","ngModelChange"],["pTemplate","specialite.ordonnance"],["for","dateEmission"],["id","dateEmission","dateFormat","dd/mm/yy",3,"ngModel","ngModelChange"],["class","p-error",4,"ngIf"],["for","montant"],["type","text","pInputText","","id","email","autofocus","",3,"ngModel","ngModelChange"],["class","assure-id assure-id",4,"ngIf"],[1,"assure-id","assure-id"],[1,"assure-id"],["class","modePaiement-id modePaiement-id",4,"ngIf"],[1,"modePaiement-id","modePaiement-id"],[1,"modePaiement-id"],["class","ordonnance-id ordonnance-id",4,"ngIf"],[1,"ordonnance-id","ordonnance-id"],[1,"ordonnance-id"],[1,"p-error"],["pButton","","pRipple","","label","Annuler","icon","pi pi-times",1,"p-button","p-button-help",3,"click"],["pButton","","pRipple","","label","Valider","icon","pi pi-check",1,"p-button-success",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"br"),e._UZ(4,"p-breadcrumb",3),e._UZ(5,"br"),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"p-toolbar",8),e.YNc(11,N,3,1,"ng-template",9),e.YNc(12,w,1,0,"ng-template",10),e.qZA(),e.TgZ(13,"p-table",11,12),e.NdJ("onLazyLoad",function(s){return i.loadCustomers(s)})("selectionChange",function(s){return i.onSelectionChange(s)})("selectAllChange",function(s){return i.onSelectAllChange(s)}),e.YNc(15,P,29,0,"ng-template",13),e.YNc(16,S,18,9,"ng-template",14),e.YNc(17,J,2,1,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"p-dialog",16),e.NdJ("visibleChange",function(s){return i.entityDialog=s}),e.YNc(19,D,30,16,"ng-template",17),e.YNc(20,j,2,0,"ng-template",18),e.qZA(),e._UZ(21,"p-confirmDialog"),e._UZ(22,"p-toast"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("model",i.items)("home",i.home),e.xp6(9),e.Q6J("value",i.liste)("lazy",!0)("selection",i.selectedEntity)("selectAll",i.selectAll)("paginator",!0)("rows",7)("totalRecords",i.totalRecords)("showCurrentPageReport",!0)("loading",i.loading)("rowsPerPageOptions",e.WLB(18,$,2*i.totalRecords,3*i.totalRecords)),e.xp6(5),e.Akn(e.DdM(21,V)),e.Q6J("visible",i.entityDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(22,G)))},directives:[x.a,v.o,r.jx,c.iA,b.V,A.Q,y.FN,F.Hq,c.Mo,c.Q7,c.lQ,c.fz,c.xl,c.Ei,c.UA,q.Lt,u.JJ,u.On,M.f,d.O5,u.Fj,U.o],pipes:[d.uU],styles:["[_nghost-%COMP%]     .el{background-color:#fff!important;width:40vw!important;box-shadow:0 20px 20px #d8dde680;border:1px solid #e7e7e7}[_nghost-%COMP%]     .p-dialog-header .ng-star-inserted{color:#fff!important}[_nghost-%COMP%]   .p-menuitem-link[_ngcontent-%COMP%]{color:#000!important;font-weight:bolder}"]}),n})()}];let K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(W)],g.Bz]}),n})(),X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,K]]}),n})()}}]);